
#!/bin/bash

# need to change the permissions chmod 755 biuld.log
# extra line

sudo apt-get update
sudo apt-get -y install xauth x11-apps
sudo apt-get -y install nano xemacs21 xemacs21-supportel
sudo apt-get -y install bc wget git make
sudo apt-get -y install gfortran-4.8 
sudo apt-get -y install g++-4.8
sudo apt-get -y install environment-modules
sudo apt-get -y install liblapack3
sudo apt-get -y install build-essential flex bison cmake zlib1g-dev libboost-system-dev libboost-thread-dev libopenmpi-dev openmpi-bin gnuplot libreadline-dev libncurses-dev libxt-dev 
sudo apt-get -y install qt4-dev-tools libqt4-dev libqt4-opengl-dev freeglut3-dev libqtwebkit-dev 
sudo apt-get -y install libscotch-dev libcgal-dev
sudo apt-get -y install vim

sudo chown -R ubuntu /mnt
sudo mkdir /data/app/OpenFOAM
sudo chown -R ubuntu /data

# Get OpenFoam and ThirdParty on instance
# wget http://downloads.sourceforge.net/foam/OpenFOAM-3.0.1.tgz?use_mirror=mesh
# wget http://downloads.sourceforge.net/foam/ThirdParty-3.0.1.tgz?use_mirror=mesh
# unpack these packages
# rename tgz files using mv and mv to FOAM_INST_DIR 
#tar xzf OpenFOAM-3.0.1.tgz 
#tar xzf ThirdParty-3.0.1.tgz 
# add following to .bashrc file 
#export FOAM_INST_DIR=/data/app/OpenFOAM
#export FOAM_RUN=/mnt/OpenFOAM/$USER-3.0.1/run
#foamDotFile=$FOAM_INST_DIR/OpenFOAM-3.0.1/etc/bashrc
#[ -f $foamDotFile ] && . $foamDotFile
source .bashrc
cd /data/app/OpenFOAM 
nohup ./Allwmake &
cd $WM_THIRD_PARTY_DIR
nohup ./makeParaView4 &
cd $FOAM_UTILITIES/postProcessing/graphics/PV4Readers
./Allwclean
./Allwmake 

